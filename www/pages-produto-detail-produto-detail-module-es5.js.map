{"version":3,"sources":["webpack:///src/pages/produto-detail/produto-detail.page.html","webpack:///src/pages/produto-detail/produto-detail-routing.module.ts","webpack:///src/pages/produto-detail/produto-detail.module.ts","webpack:///src/pages/produto-detail/produto-detail.page.scss","webpack:///src/pages/produto-detail/produto-detail.page.ts"],"names":["routes","path","component","ProdutoDetailPageRoutingModule","imports","forChild","exports","ProdutoDetailPageModule","declarations","ProdutoDetailPage","router","activatedRoute","service","cartService","id","snapshot","params","produtoId","item$","findById","pipe","produtoDto","loadImageUrls","items","item","getImageFromBucket","imageUrl","BUCKET_URL","produto","addProduto","navigateByUrl","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAMA,MAAM,GAAW,CACrB;AAAEC,YAAI,EAAE,EAAR;AAAYC,iBAAS,EAAE;AAAvB,OADqB,EAErB;AAAED,YAAI,EAAE,YAAR;AAAsBC,iBAAS,EAAE;AAAjC,OAFqB,CAAvB;;UASaC,8BAA8B;AAAA;AAAA,O;;AAA9BA,oCAA8B,6DAJ1C,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAI0C,GAA9BH,8BAA8B,CAA9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCKAI,uBAAuB;AAAA;AAAA,O;;AAAvBA,6BAAuB,6DATnC,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,6FAJO,CADD;AAORI,oBAAY,EAAE,CAAC,sEAAD;AAPN,OAAT,CASmC,GAAvBD,uBAAuB,CAAvB;;;;;;;;;;;;;;;;ACnBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCcFE,iBAAiB;AAG5B,mCACUC,MADV,EAEEC,cAFF,EAGUC,OAHV,EAIUC,WAJV,EAIkC;AAAA;;AAAA;;AAHxB,eAAAH,MAAA,GAAAA,MAAA;AAEA,eAAAE,OAAA,GAAAA,OAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AAER,cAAMC,EAAE,GAAGH,cAAc,CAACI,QAAf,CAAwBC,MAAxB,CAA+BC,SAA1C;AACA,eAAKC,KAAL,GAAa,KAAKN,OAAL,CAAaO,QAAb,CAAsBL,EAAtB,EAA0BM,IAA1B,CACX,iEAAU,UAAAC,UAAU;AAAA,mBAAI,KAAI,CAACC,aAAL,CAAmBD,UAAnB,CAAJ;AAAA,WAApB,CADW,CAAb;AAGD;;AAb2B;AAAA;AAAA,wCAedE,KAfc,EAeK;AAAA;;AAC/B,mBAAO,gDAAGA,KAAH,EAAUH,IAAV,CACL,gEAAS,UAAAI,IAAI,EAAI;AACf,qBAAO,MAAI,CAACZ,OAAL,CAAaa,kBAAb,CAAgCD,IAAI,CAACV,EAArC,EAAyCM,IAAzC,CACL,2DAAsB;AAAA,uBAAO,MAAD,OAAC,CAAD,kBAAMI,IAAN,CAAC,EAAS;AAAEE,0BAAQ,YAAK,yEAAYC,UAAjB,kBAAmCH,IAAI,CAACV,EAAxC;AAAV,iBAAT,CAAP;AAAA,eAAtB,CADK,CAAP;AAGD,aAJD,CADK,CAAP;AAOD;AAvB2B;AAAA;AAAA,oCAyBlBc,OAzBkB,EAyBG;AAC7B,iBAAKf,WAAL,CAAiBgB,UAAjB,CAA4BD,OAA5B;AACA,iBAAKlB,MAAL,CAAYoB,aAAZ,CAA0B,OAA1B;AACD;AA5B2B;;AAAA;AAAA,S;;;;gBAbL;;gBAAhB;;gBAKA;;gBADA;;;;AASIrB,uBAAiB,6DAL7B,gEAAU;AACTsB,gBAAQ,EAAE,oBADD;AAETC,gBAAQ,EAAR;AAAA;AAAA,gHAFS;;;;AAAA,OAAV,CAK6B,GAAjBvB,iBAAiB,CAAjB","file":"pages-produto-detail-produto-detail-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Produto Detail</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding *ngIf=\\\"item$ | async as item\\\">\\n  <ion-fab vertical=\\\"top\\\" horizontal=\\\"end\\\" edge slot=\\\"fixed\\\">\\n    <ion-fab-button routerLink=\\\"/cart\\\">\\n      <ion-icon name=\\\"cart\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n  <ion-card class=\\\"md hydrated\\\">\\n    <img [src]=\\\"item.imageUrl || 'assets/imgs/prod.jpg'\\\">\\n\\n    <ion-card-header class=\\\"ion-inherit-color md hydrated\\\">\\n      <ion-card-title>{{item.nome}}</ion-card-title>\\n    </ion-card-header>\\n\\n    <ion-card-content> {{item.preco | currency}} </ion-card-content>\\n\\n    <ion-button expand=\\\"block\\\" color=\\\"primary\\\" (click)=\\\"addToCart(item)\\\">Adicionar ao carrinho</ion-button>\\n  </ion-card>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ProdutoDetailPage } from './produto-detail.page';\n\n\nconst routes: Routes = [\n  { path: '', component: ProdutoDetailPage },\n  { path: ':produtoId', component: ProdutoDetailPage },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProdutoDetailPageRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProdutoDetailPageRoutingModule } from './produto-detail-routing.module';\n\nimport { ProdutoDetailPage } from './produto-detail.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProdutoDetailPageRoutingModule\n  ],\n  declarations: [ProdutoDetailPage]\n})\nexport class ProdutoDetailPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvcGFnZXMvcHJvZHV0by1kZXRhaWwvcHJvZHV0by1kZXRhaWwucGFnZS5zY3NzIn0= */\";","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { map, mergeMap, switchMap } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport { CartService } from 'src/services/cart.service';\nimport { ProdutoService } from 'src/services/domain/produto.service';\nimport { ProdutoDTO } from './../../models/produto.dto';\n\n@Component({\n  selector: 'app-produto-detail',\n  templateUrl: './produto-detail.page.html',\n  styleUrls: ['./produto-detail.page.scss'],\n})\nexport class ProdutoDetailPage {\n  item$: Observable<ProdutoDTO>;\n\n  constructor(\n    private router: Router,\n    activatedRoute: ActivatedRoute,\n    private service: ProdutoService,\n    private cartService: CartService,\n  ) {\n    const id = activatedRoute.snapshot.params.produtoId;\n    this.item$ = this.service.findById(id).pipe(\n      switchMap(produtoDto => this.loadImageUrls(produtoDto)),\n    );\n  }\n\n  loadImageUrls(items: ProdutoDTO) {\n    return of(items).pipe(\n      mergeMap(item => {\n        return this.service.getImageFromBucket(item.id).pipe(\n          map<Blob, ProdutoDTO>(() => ({ ...item, imageUrl: `${environment.BUCKET_URL}/prod${item.id}.jpg` })),\n        );\n      }),\n    );\n  }\n\n  addToCart(produto: ProdutoDTO) {\n    this.cartService.addProduto(produto);\n    this.router.navigateByUrl('/cart');\n  }\n}\n"]}