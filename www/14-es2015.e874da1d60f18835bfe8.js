(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{hylv:function(n,t,e){"use strict";e.r(t),e.d(t,"OrderConfirmationPageModule",(function(){return w}));var o=e("ofXK"),i=e("3Pt+"),c=e("TEn/"),b=e("AytR"),r=e("fXoL"),a=e("tk/3");let d=(()=>{class n{constructor(n){this.httpClient=n,this.insert=n=>this.httpClient.post(b.a.API_URL+"/pedidos",n,{observe:"response",responseType:"text"})}}return n.\u0275fac=function(t){return new(t||n)(r.Qb(a.b))},n.\u0275prov=r.Db({token:n,factory:n.\u0275fac}),n})();var s=e("tyNb"),l=e("vkgz"),u=e("JIr8"),p=e("Q22s"),m=e("G8+7");function f(n,t){1&n&&(r.Mb(0,"ion-title"),r.mc(1,"Pedido registrado!"),r.Lb())}function g(n,t){1&n&&(r.Mb(0,"ion-title"),r.mc(1,"Confira seu pedido"),r.Lb())}function L(n,t){if(1&n&&(r.Mb(0,"ion-item"),r.Mb(1,"ion-thumbnail",3),r.Ib(2,"img",4),r.Lb(),r.Mb(3,"ion-label"),r.Mb(4,"h2"),r.mc(5),r.Lb(),r.Mb(6,"p",5),r.mc(7),r.Lb(),r.Mb(8,"p",6),r.mc(9),r.Xb(10,"currency"),r.Lb(),r.Lb(),r.Lb()),2&n){const n=t.$implicit;r.xb(2),r.bc("src",n.produto.imageUrl||"assets/imgs/prod.jpg",r.ic),r.xb(3),r.nc(n.produto.nome),r.xb(2),r.nc(n.quantidade),r.xb(2),r.nc(r.Yb(10,4,n.produto.preco*n.quantidade))}}function h(n,t){if(1&n&&(r.Kb(0),r.Mb(1,"ion-card"),r.Mb(2,"ion-card-header"),r.Mb(3,"ion-card-title"),r.mc(4," Endere\xe7o de entrega "),r.Lb(),r.Lb(),r.Mb(5,"ion-item"),r.Mb(6,"h2"),r.mc(7),r.Lb(),r.Mb(8,"p"),r.mc(9),r.Lb(),r.Mb(10,"p"),r.mc(11),r.Lb(),r.Lb(),r.Lb(),r.Jb()),2&n){const n=t.ngIf;r.xb(7),r.pc("",null==n?null:n.logradouro,", ",null==n?null:n.numero,""),r.xb(2),r.qc("",null==n?null:n.complemento," ",null==n?null:n.bairro," CEP ",null==n?null:n.cep,""),r.xb(2),r.pc("",null==n?null:n.cidade.nome,", ",null==n?null:n.cidade.estado.nome,"")}}function M(n,t){if(1&n&&(r.Mb(0,"div"),r.Mb(1,"ion-card"),r.Mb(2,"ion-card-header"),r.Mb(3,"ion-card-title"),r.mc(4," Cliente "),r.Lb(),r.Lb(),r.Mb(5,"ion-item"),r.Mb(6,"h2"),r.mc(7),r.Lb(),r.Mb(8,"p"),r.mc(9),r.Lb(),r.Lb(),r.Lb(),r.kc(10,h,12,7,"ng-container",0),r.Lb()),2&n){const n=r.Wb().ngIf,t=r.Wb();r.xb(7),r.nc(null==n?null:n.nome),r.xb(2),r.nc(null==n?null:n.email),r.xb(1),r.bc("ngIf",t.findEndereco(n))}}function x(n,t){if(1&n&&(r.Kb(0),r.kc(1,M,11,3,"div",0),r.Jb()),2&n){const n=r.Wb();r.xb(1),r.bc("ngIf",n.codpedido)}}function k(n,t){if(1&n&&(r.Kb(0),r.Mb(1,"ion-item"),r.Mb(2,"ion-label"),r.mc(3," Pagamento com cart\xe3o "),r.Lb(),r.Mb(4,"p"),r.mc(5),r.Lb(),r.Lb(),r.Jb()),2&n){const n=r.Wb(2);r.xb(5),r.oc("Parcelas: ",n.pedido.pagamento.numeroDeParcelas,"")}}function I(n,t){1&n&&(r.Kb(0),r.Mb(1,"ion-item"),r.Mb(2,"ion-label"),r.mc(3," Pagamento com boleto "),r.Lb(),r.Lb(),r.Jb())}function v(n,t){if(1&n){const n=r.Nb();r.Mb(0,"div"),r.Mb(1,"ion-card"),r.Mb(2,"ion-card-header"),r.Mb(3,"ion-card-title"),r.mc(4," Pagamento "),r.Lb(),r.Lb(),r.kc(5,k,6,1,"ng-container",0),r.kc(6,I,4,0,"ng-container",0),r.Mb(7,"ion-button",7),r.Ub("click",(function(){return r.hc(n),r.Wb().checkout()})),r.mc(8,"Confirmar pedido"),r.Lb(),r.Mb(9,"ion-button",8),r.mc(10,"Voltar"),r.Lb(),r.Lb(),r.Mb(11,"ion-button",8),r.mc(12,"Voltar"),r.Lb(),r.Lb()}if(2&n){const n=r.Wb();r.xb(5),r.bc("ngIf","pagamentoComCartao"==n.pedido.pagamento["@type"]),r.xb(1),r.bc("ngIf","pagamentoComBoleto"==n.pedido.pagamento["@type"])}}const y=[{path:"",component:(()=>{class n{constructor(n,t,e,o){this.router=n,this.cartService=e,this.pedidoService=o,this.pedido=this.router.getCurrentNavigation().extras.state.pedido,this.cartItems=this.cartService.getCart().items,t.findById(this.pedido.cliente.id)}findEndereco(n){const t=this.pedido.enderecoDeEntrega.id,e=n.enderecos,o=e.findIndex(n=>n.id===t);return e[o]}total(){return this.cartService.total()}checkout(){this.pedidoService.insert(this.pedido).pipe(Object(l.a)(()=>this.cartService.createOrClearCart()),Object(l.a)(n=>this.codpedido=this.extractId(n.headers.get("location"))),Object(u.a)(n=>{if(403===n.status)return this.router.navigateByUrl("/")})).subscribe()}extractId(n){const t=n.lastIndexOf("/");return n.substring(t+1)}}return n.\u0275fac=function(t){return new(t||n)(r.Hb(s.g),r.Hb(p.a),r.Hb(m.a),r.Hb(d))},n.\u0275cmp=r.Bb({type:n,selectors:[["app-order-confirmation"]],decls:13,vars:7,consts:[[4,"ngIf"],[1,"ion-inherit-color","md","hydrated"],[4,"ngFor","ngForOf"],["slot","start"],[3,"src"],[1,"nolinebreak"],["item-end",""],["expand","block","color","primary",3,"click"],["expand","block","color","secondary","routerLink","/cart"]],template:function(n,t){1&n&&(r.Mb(0,"ion-header"),r.Mb(1,"ion-toolbar"),r.kc(2,f,2,0,"ion-title",0),r.kc(3,g,2,0,"ion-title",0),r.Lb(),r.Lb(),r.Mb(4,"ion-content"),r.Mb(5,"ion-card"),r.Mb(6,"ion-card-header",1),r.Mb(7,"ion-card-title"),r.mc(8," Itens do pedido "),r.Lb(),r.Lb(),r.kc(9,L,11,6,"ion-item",2),r.Lb(),r.kc(10,x,2,1,"ng-container",0),r.Xb(11,"async"),r.kc(12,v,13,2,"div",0),r.Lb()),2&n&&(r.xb(2),r.bc("ngIf",t.codpedido),r.xb(1),r.bc("ngIf",!t.codpedido),r.xb(6),r.bc("ngForOf",t.cartItems),r.xb(1),r.bc("ngIf",r.Yb(11,5,t.cliente$)),r.xb(2),r.bc("ngIf",t.codpedido))},directives:[c.m,c.J,o.k,c.j,c.f,c.h,c.i,o.j,c.I,c.r,c.H,c.s,c.d,c.Q,s.h],pipes:[o.b,o.d],styles:[""]}),n})()}];let C=(()=>{class n{}return n.\u0275mod=r.Fb({type:n}),n.\u0275inj=r.Eb({factory:function(t){return new(t||n)},imports:[[s.i.forChild(y)],s.i]}),n})(),w=(()=>{class n{}return n.\u0275mod=r.Fb({type:n}),n.\u0275inj=r.Eb({factory:function(t){return new(t||n)},providers:[d],imports:[[o.c,i.d,c.K,C]]}),n})()}}]);